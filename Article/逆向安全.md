## 知识点1 逆向安全 & 安全机制

**【扩展1-1】怎样防止反编译？**

* (1)本地数据加密。对NSUserDefaults，sqlite存储文件数据加密，保护账号和关键信息。
* (2)URL编码加密。对程序中出现的URL进行编码加密，防止URL被静态分析。
* (3)网络传输数据加密。对客户端传输数据提供加密方案，有效防止通过网络接口的拦截获取数据。
* (4)方法体、方法名混淆加固。对应用程序的方法名和方法体进行混淆，保证源码被逆向后无法解析代码。
* (5)对应用程序逻辑结构进行打乱混排，保证源码可读性降到最低。

**【1-2】苹果的安全机制有哪些？**

* 没有经过用户同意，不能随便获取用户信息；
* 所有的程序都在沙盒里运行，B 程序不能进入 A 程序的运行范围；
* 如果要防止代码被反编译，可以将自己的代码中的 .m 文件封装成静态库（.a 文件）或者是 framework 文件，只提供 .h 供他人调用，这样就保证了个人代码的安全性。
* 网络登录的话跟用户名和密码相关的要发送 POST 请求，如果采用 GET 请求的话这些用户隐私会直接显示在 URL 中。此外要对账号和密码采用加密技术。MD5 + 加盐的加密技术。

**【1-3】iOS 的签名机制大概是怎样的？**

假设我们有一个 App 需要发布，为了防止中途篡改 APP 内容，保证 App 的完整性以及 App 是由指定私钥签发的。首先需要将 App 内容通过摘要算法，得到摘要，再用私钥对摘要进行加密得到密文，将源文本、密文和私钥对应的公钥一并发布即可。那么如何验证呢？验证方首先查看公钥是否是私钥方的，然后用公钥对密文进行解密得到摘要，将 App 用同样的摘要算法得到摘要，两个摘要进行对比，如果相等那么一切正常。否则视作无效。

**【1-4】客户端安全性处理方式有哪些？**

* 网络数据传输时敏感数据（账号、密码、消费数据、银行卡账号等），不能使用明文发送；
* 源代码混淆；
* 本地文件存储（游戏的存档）

**【1-5】如何进行数据加密？**

常见的加密算法包括：MD5、SHA、DES、3DES、RC2和RC4、RSA、IDEA、DSA、AES

**MD5 的特点**：

* （1）输入两个不同的明文不会得到相同的输出值；
* （2）根据输出值，不能得到原始的明文，即其过程不可逆。

现在的 MD5 已经不再绝对安全，对此，可以对 MD5 稍作改进，比如加盐（Salt）以增加解密的难度。

加盐（Salt）：在明文的固定位置插入随机串，然后再进行 MD5。

先加密，后乱序：先对明文进行 MD5，然后再对加密得到的 MD5 串的字符串进行乱序。

总之宗旨就是：即使黑客攻破了数据库，也无法解密出正确的明文。

